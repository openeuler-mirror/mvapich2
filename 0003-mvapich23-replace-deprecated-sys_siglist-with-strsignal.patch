From 8b9aa396f1835f57d0c279252361d47be89dbba1 Mon Sep 17 00:00:00 2001
From: zhanghua1831 <zhanghua1831@163.com>
Date: Sat, 27 Mar 2021 14:30:31 +0800
Subject: [PATCH] fix build error, replace deprecated sys_siglist with
strsignal

---
 src/mpid/ch3/channels/common/src/util/error_handling.c | 2 +-
 src/pm/mpirun/mpispawn.c                               | 2 +-
 2 files changed, 2 insertions(+), 2 deletions(-)

diff --git a/src/mpid/ch3/channels/common/src/util/error_handling.c b/src/mpid/ch3/channels/common/src/util/error_handling.c
index eab21a8..2a40dc5 100644
--- a/src/mpid/ch3/channels/common/src/util/error_handling.c
+++ b/src/mpid/ch3/channels/common/src/util/error_handling.c
@@ -69,7 +69,7 @@ int show_backtrace = 0;
 // Signal handler for errors
 void error_sighandler(int sig, siginfo_t *info, void *secret) {
     // Always print error
-    PRINT_ERROR( "Caught error: %s (signal %d)\n", sys_siglist[sig], sig );
+    PRINT_ERROR( "Caught error: %s (signal %d)\n", strsignal(sig), sig );
     // Show backtrace if required
     if (show_backtrace) print_backtrace();
     // Raise the signal again with default handler
diff --git a/src/pm/mpirun/mpispawn.c b/src/pm/mpirun/mpispawn.c
index 45e14be..6b38561 100644
--- a/src/pm/mpirun/mpispawn.c
+++ b/src/pm/mpirun/mpispawn.c
@@ -764,7 +764,7 @@ void child_handler(int signal)
     gethostname(my_host_name, MAX_HOST_LEN);
 
     rank = mt_id;
-    PRINT_DEBUG(DEBUG_Fork_verbose, "mpispawn child_handler: got signal %d: %s\n", signal, sys_siglist[signal]);
+    PRINT_DEBUG(DEBUG_Fork_verbose, "mpispawn child_handler: got signal %d: %s\n", signal, strsignal(signal));
     while (1) {
         do {
             pid = waitpid(-1, &status, WNOHANG);
-- 
2.23.0

